<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カスタムタイピングゲーム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>タイピングゲーム</h1>
        <button id="settings-button" class="control-button">⚙️</button>
    </header>

    <div class="game-container">
        <div class="score-display">
            <div class="info">打鍵数: <span id="keystrokes">0</span> 回</div>
            <div class="info">文字数: <span id="characters">0</span> 文字</div>
            <div class="info">ミス: <span id="miss">0</span> 回</div>
            <div class="info">正誤率: <span id="accuracy">100.0</span> %</div>
            <div class="info">打鍵速度: <span id="typingSpeed">0.00</span> 打/秒</div>
            <div class="info">残り時間: <span id="time-left-display">--</span> 秒</div>
        </div>

        <div class="target-word-area">
            <div id="targetKanji" class="target-text"></div>
            <div id="targetKana" class="target-text"></div>
            <div id="targetRomaji" class="target-text"></div>
        </div>
    </div>

    <div id="postGameControls" style="margin-top: 10px; text-align: center;">
        <button id="showResultButton" class="small-button" style="display:none;">結果を再表示</button>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="modal-close-button">&times;</span>
            <h2>ゲーム終了！</h2>
            <div class="result-table-container">
                <table class="result-table">
                    <tbody>
                        <tr>
                            <th>打鍵数</th>
                            <td><span id="finalKeystrokes">0</span> 回</td>
                        </tr>
                        <tr>
                            <th>文字数</th>
                            <td><span id="finalCharacters">0</span> 文字</td>
                        </tr>
                        <tr>
                            <th>総ミスタイプ</th>
                            <td><span id="finalMiss">0</span> 回</td>
                        </tr>
                        <tr>
                            <th>正誤率</th>
                            <td><span id="finalAccuracy">100.0</span> %</td>
                        </tr>
                        <tr>
                            <th>打鍵速度</th>
                            <td><span id="finalTypingSpeed">0.00</span> 打/秒</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-actions">
                <button id="restartButton">もう一度遊ぶ</button>
            </div>
        </div>
    </div>

    <div id="settings-sidebar">
        <div class="modal-content">
            <h2>設定</h2>
            <div class="setting-item">
                <label for="typing-sound-toggle">タイピング音:</label>
                <input type="checkbox" id="typing-sound-toggle" checked>
            </div>
            <div class="setting-item">
                <label for="mistype-sound-toggle">ミスタイプ音:</label>
                <input type="checkbox" id="mistype-sound-toggle" checked>
            </div>
            <div class="setting-item">
                <label for="mistype-effect-toggle">ミスしたときの演出:</label>
                <input type="checkbox" id="mistype-effect-toggle" checked>
            </div>

            <hr style="margin: 20px 0; border-color: #eee;">

            <h2>ファイルインポート</h2>
            <div class="file-import-section">
                <label for="romajiFile" class="file-import-label">ローマ字ルール:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="romajiFile" accept=".txt" class="hidden-file-input">
                    <button type="button" class="small-button import-button" data-target="romajiFile">ファイルを選択</button>
                    <div class="file-name" id="romajiFileName">未選択（デフォルトを使用）</div>
                </div>
                <button id="resetRomajiButton" class="small-button">デフォルトに戻す</button>
            </div>

            <div class="file-import-section">
                <label for="wordsFile" class="file-import-label">問題ファイル:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="wordsFile" accept=".txt" class="hidden-file-input">
                    <button type="button" class="small-button import-button" data-target="wordsFile">ファイルを選択</button>
                    <div class="file-name" id="wordsFileName">未選択（デフォルトを使用）</div>
                </div>
                <button id="resetWordsButton" class="small-button">デフォルトに戻す</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
